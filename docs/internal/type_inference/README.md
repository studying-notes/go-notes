---
date: 2022-10-02T14:37:05+08:00  # 创建日期
author: "Rustle Karl"  # 作者

title: "类型推断"  # 文章标题
url:  "posts/go/docs/internal/type_inference/README"  # 设置网页永久链接
tags: [ "Go", "readme" ]  # 标签
categories: [ "Go 学习笔记" ]  # 分类

toc: true  # 目录
draft: true  # 草稿
---

类型推断（Type Inference）是编程语言在编译时自动解释表达式中数据类型的能力，通常在函数式编程的语言中存在。类型推断的优势主要在于可以省略类型，这使编程变得更加容易。

明确地指出变量的类型在编程语言中很常见，编译器在多大程度上支持类型推断因语言而异。例如，某些编译器可以推断出变量、函数参数和返回值的类型。

如下所示，Go 语言提供了特殊的操作符“:=”用于变量的类型推断。

```
a := 123 --> var a int = 123
```

## 类型推断的优势

语言支持类型推断有两个主要的优势。

一是如果使用得当，那么它可以使代码更易阅读。

二是如果类型更加复杂，那么类型推断的价值变得显而易见。在许多情况下，这将减少代码中的冗余信息。

尽管如此，显式地指出类型仍可以让编译器更轻松地了解代码实际应执行的操作，而不会犯任何错误。

## Go 语言中类型推断的特性

每个语言的类型推断能力是不同的，Go 语言的目标是减少在其他静态类型语言中存在的混乱情况，Go 语言的设计者认为 Java 或 C++ 中的类型系统过于复杂。因此，在设计 Go 语言时，他们对变量使用简单的类型推断，给人以编写动态类型代码的感觉，同时仍然保留静态类型的好处。

Go 语言的类型推断目前还相对简单，没有涵盖参数和返回值之类的内容。在实践中，可以通过在声明新变量或常量时忽略类型信息或使用 := 表示法来触发 Go 语言中的类型推断。例如，在 Go 语言中，以下三个语句是等效的。

```go
var a int =10
var a -10
a := 10
```

以 a := 333 为例，变量 a 最终会被推断为 int 类型，可以用 Printf 的 %T 格式化打印出 a 的类型，输出结果为 type: int。

```go
package main

import "fmt"

func main() {
	a := 333
	fmt.Printf("type: %T value: %v", a, a)
}
```

由于 Go 语言的类型系统禁止了不同类型之间的转换，因此 a 已经被推断为 int 类型，不能够赋值给 int64 类型。

Go 语言的类型推断在处理包含变量标识符的推断方面是半智能的。本质上，编译器不允许对变量标识符引用的值进行强制类型转换。

## 类型推断原理

[类型推断原理](complier.md)

```go

```
